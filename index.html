<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    *{
      padding: 0px;
      margin: 0px;
      box-sizing: border-box;
    }
    .container{
      height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color:lightgray;
    }

    form{
      display: flex;
      align-items: center;
      justify-content: center;
      height: 250px;
      width: 300px;
      background-color:gray;
      border-radius: 10px;
      box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
      flex-direction: column;
      gap: 20px;
    }

    form input{
      width: 100%;
      padding: 10px;
      border: unset;
      border-radius: 20px;
    }

    form button{
      width: 30%;
      border-radius: 20px;
      padding: 10px;
      border: unset;
    }

  </style>
</head>
<body>
  <div class="container">
    <form class="postForm">
      <h1>Post Data Table</h1>
      <!-- <div class="idtag inputTag">
      <input type="number" id="id" placeholder="Enter your id" required/>
    </div> -->
    <div class="nametag inputTag">
      <input type="text" id="name" placeholder="Enter your Name" required/>
    </div>
    <div class="agetag inputTag">
      <input type="number" id="age" placeholder="Enger your name" required/>
    </div>
    <button type="submit">Submit</button>
    </form>
    <h1 class="msg"></h1>
  </div>  
  <!-- <script>
    document.querySelector('.postForm').addEventListener('submit' , (event)=>{
      event.preventDefault();
      const id = document.getElementById('id');
      const name = document.getElementById('name');
      const age = document.getElementById('age');

      const details = {id , name , age};

      fetch('http://localhost:4200/curd/post' , {
        method : "POST",
        headers : {
          "Content-Type" : "application/json",
        },
        body : JSON.stringify(details)
      }).then(response => response.json()).then(data => {
        // let a = data.data;
        const msg = document.querySelector('.msg').innerText = data.message;
      }).catch((error)=>{
        console.log("error" , error);
      })

    })
  </script> -->
  <script>
    document.querySelector('.postForm').addEventListener('submit', (event) => {
      event.preventDefault();
      const name = document.getElementById('name').value;
      const age = document.getElementById('age').value;
  
      const details = {name, age }; // Remove id
  
      fetch('http://localhost:4200/curd/post', {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(details),
      })
      .then(response => response.json()) // Convert response to JSON
      .then(data => {
        document.querySelector('.msg').innerText = data.message; // Fix message display

        if (data) {
        console.log("Success:", data);
        setTimeout(() => {
            window.location.reload(); // Reloads after 1 second
        }, 1000); 
    }
   
})
      .catch((error) => {
        console.log("Error:", error);
      });
    });
  </script>
  
</body>
</html>